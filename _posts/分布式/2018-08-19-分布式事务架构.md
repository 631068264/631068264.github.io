---

layout:     post
rewards: false
title:      分布式事务架构
categories:
- 分布式
---


# 结构

![image-20210815141125330](https://tva1.sinaimg.cn/large/008i3skNgy1gthg101a5xj60zv0u0gqd02.jpg)

![image-20210815141339182](https://tva1.sinaimg.cn/large/008i3skNgy1gthg3b8gqxj61ag0satdt02.jpg)



# 处理类型



## 协同式

决策和执行顺序逻辑分布在每个部分，通过异步事件沟通

![image-20210815120907980](https://tva1.sinaimg.cn/large/008i3skNgy1gthchsgyrrj61dl0u079j02.jpg)![image-20210815120947467](https://tva1.sinaimg.cn/large/008i3skNgy1gthcifmf9aj61ea09k76802.jpg)

## 编排式

把决策和执行顺序逻辑集中到编排器，由编排器通知操作方

![image-20210815122511085](https://tva1.sinaimg.cn/large/008i3skNgy1gthcyg259bj61hc09wjtr02.jpg)

![image-20210815122553919](https://tva1.sinaimg.cn/large/008i3skNgy1gthcz6o2abj61g205wt9t02.jpg)

![image-20210815123953232](https://tva1.sinaimg.cn/large/008i3skNgy1gthddsmvh2j61fw0hgq7l02.jpg)

![image-20210815124724913](https://tva1.sinaimg.cn/large/008i3skNgy1gthdll5lpvj61e80rwdlj02.jpg)

![image-20210815125046257](https://tva1.sinaimg.cn/large/008i3skNgy1gthdp2xrdvj61fm0e4tco02.jpg)

# 解决隔离问题

![image-20210815140548448](https://tva1.sinaimg.cn/large/008i3skNgy1gthfv5nt8zj61de0u0dnp02.jpg)

![image-20210815140816270](https://tva1.sinaimg.cn/large/008i3skNgy1gthfxpvsddj615g0u0jwr02.jpg)

## 解决隔离的方法

![image-20210815141022545](https://tva1.sinaimg.cn/large/008i3skNgy1gthfzwzeg4j61fi0la0xs02.jpg)



## 语义锁

程序级锁

![image-20210815142316791](https://tva1.sinaimg.cn/large/008i3skNgy1gthgdc3y1lj61eu0a4act02.jpg)

![image-20210815142523422](https://tva1.sinaimg.cn/large/008i3skNgy1gthgfjhkofj61eu0m0tfo02.jpg)

## 交换式更新

更新操作设计成按任意顺序执行

